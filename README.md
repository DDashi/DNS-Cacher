Файл server.cs:

Импортируется пространство имён System.Net, System.Net.Sockets, System.Text, DNS_cacher и Server.
Определяется метод SendData, который принимает сокет клиента, домен и IP-адрес, и отправляет данные клиенту.
Вызывается метод Read() из класса FileCache.
Создаётся объект IPEndPoint с адресом IPAddress.Any и портом 53 для запуска сервера.
Создаётся объект Socket, который принимает параметры из ipPoint и использует протокол TCP.
Вызывается метод Bind сокета, передавая ему параметры ipPoint.
Выводится сообщение "Server start".
Запускается бесконечный цикл while(true).
Вызывается метод Listen сокета, который блокирует поток и ожидает подключения клиента.
Создаётся объект Socket для клиента с помощью метода Accept.
Создаются массив данных data и переменная size для получения данных от клиента.
Полученные данные декодируются с помощью метода Encoding.UTF8.GetString и сохраняются в переменной dataString.
Проверяется наличие кэша для запрашиваемых данных. Если кэш есть и его время жизни (TTL) не истекло, то данные отправляются клиенту с помощью метода SendData, а сообщение выводится в консоль.
Если кэша нет или его TTL истекло, то происходит попытка получения данных от DNS-сервера с помощью метода GetHostEntry. В случае ошибки выводится сообщение об ошибке в консоль и происходит переход к следующей итерации цикла.
Если данные успешно получены, то сохраняются в кэше, отправляются клиенту и выводятся сообщения в консоль.
Закрывается соединение с клиентом.
Вызывается метод Save() из класса FileCache.

Файл cache.cs:

Определяется класс Cache с тремя свойствами: Ip, Domen и Ttl.
Определяются два конструктора: пустой базовый конструктор для десериализации и конструктор с параметрами, который принимает IP-адрес, домен и время жизни кэша (TTL).

Файл file.cs:

Импортируются пространства имён Server и System.Text.Json.
Определяется статический класс FileCache.
Определяются две приватные строки _IPFileName и _domenFileName для хранения имен файлов кэша по IP и по домену.
Определяются два публичных словаря cacheByIp и cacheByDomen для хранения кэша по IP и по домену.
ReadData(string fileName) - асинхронный метод, который считывает данные из файла и возвращает словарь типа Dictionary<string, Cache>. Если файл не существует, то создается пустой файл. Если какие-то записи в кэше устарели, то они удаляются.
Read() - асинхронный метод, который читает данные из файлов _IPFileName и _domenFileName и сохраняет их в соответствующих полях cacheByIp и cacheByDomen.
SaveData(string fileName, Dictionary<string, Cache> data) - асинхронный метод, который сериализует словарь data в JSON-строку и записывает ее в файл fileName.
Save() - метод, который сохраняет кэш в файлы _IPFileName и _domenFileName.